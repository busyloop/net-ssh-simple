<!DOCTYPE html>
<html xmlns='http://www.w3.org/1999/xhtml'>
  <head>
    <title>Code coverage for Net-ssh-simple</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <script src='./assets/0.10.0/application.js' type='text/javascript'></script>    
    <link href='./assets/0.10.0/application.css' media='screen, projection, print' rel='stylesheet' type='text/css'>
    <link rel="shortcut icon" type="image/png" href="./assets/0.10.0/favicon_green.png" />
    <link rel="icon" type="image/png" href="./assets/0.10.0/favicon.png" />
  </head>
  
  <body>
    <div id="loading">
      <img src="./assets/0.10.0/loading.gif" alt="loading"/>
    </div>
    <div id="wrapper" style="display:none;">
      <div class="timestamp">Generated <abbr class="timeago" title="2017-02-17T14:12:10+01:00">2017-02-17T14:12:10+01:00</abbr></div>
      <ul class="group_tabs"></ul>

      <div id="content">
        <div class="file_list_container" id="AllFiles">
  <h2>
    <span class="group_name">All Files</span>
    (<span class="covered_percent"><span class="green">98.8%</span></span>
     covered at
     <span class="covered_strength">
       <span class="green">
         74.3
       </span>
    </span> hits/line)
  </h2>
  <a name="AllFiles"></a>
  <div>
    <b>1</b> files in total.
    <b>166</b> relevant lines. 
    <span class="green"><b>164</b> lines covered</span> and
    <span class="red"><b>2</b> lines missed </span>
  </div>
  <table class="file_list">
    <thead>
      <tr>
        <th>File</th>
        <th>% covered</th>
        <th>Lines</th>
        <th>Relevant Lines</th>
        <th>Lines covered</th>
        <th>Lines missed</th>
        <th>Avg. Hits / Line</th>
      </tr>
    </thead>
    <tbody>
      
      <tr>
        <td class="strong"><a href="#88c716d6274c3299a209db753fb48b66248bc05e" class="src_link" title="lib/net/ssh/simple.rb">lib/net/ssh/simple.rb</a></td>
        <td class="green strong">98.8 %</td>
        <td>744</td>
        <td>166</td>
        <td>164</td>
        <td>2</td>
        <td>74.3</td>
      </tr>
      
    </tbody>
  </table>
</div>


        
      </div>
    
      <div id="footer">
        Generated by <a href="http://github.com/colszowka/simplecov">simplecov</a> v0.12.0 
        and simplecov-html v0.10.0<br/>
        using RSpec
      </div>
    
      <div class="source_files">
      
        <div class="source_table" id="88c716d6274c3299a209db753fb48b66248bc05e">
  <div class="header">
    <h3>lib/net/ssh/simple.rb</h3>
    <h4><span class="green">98.8 %</span> covered</h4>
    <div>
      <b>166</b> relevant lines. 
      <span class="green"><b>164</b> lines covered</span> and
      <span class="red"><b>2</b> lines missed.</span>
    </div>
  </div>
  
  <pre>
    <ol>
      
        <li class="never" data-hits="" data-linenumber="1">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="2">
          
          
          <code class="ruby"># Copyright (C) 2011 by moe@busyloop.net</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="3">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="4">
          
          
          <code class="ruby"># Permission is hereby granted, free of charge, to any person obtaining a copy</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="5">
          
          
          <code class="ruby"># of this software and associated documentation files (the &quot;Software&quot;), to deal</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="6">
          
          
          <code class="ruby"># in the Software without restriction, including without limitation the rights</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="7">
          
          
          <code class="ruby"># to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="8">
          
          
          <code class="ruby"># copies of the Software, and to permit persons to whom the Software is</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="9">
          
          
          <code class="ruby"># furnished to do so, subject to the following conditions:</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="10">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="11">
          
          
          <code class="ruby"># The above copyright notice and this permission notice shall be included in</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="12">
          
          
          <code class="ruby"># all copies or substantial portions of the Software.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="13">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="14">
          
          
          <code class="ruby"># THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="15">
          
          
          <code class="ruby"># IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="16">
          
          
          <code class="ruby"># FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="17">
          
          
          <code class="ruby"># AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="18">
          
          
          <code class="ruby"># LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="19">
          
          
          <code class="ruby"># OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="20">
          
          
          <code class="ruby"># THE SOFTWARE.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="21">
          
          
          <code class="ruby">#</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="22">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="23">
          <span class="hits">1</span>
          
          <code class="ruby">require &#39;net/ssh/simple/version&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="24">
          <span class="hits">1</span>
          
          <code class="ruby">require &#39;blockenspiel&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="25">
          <span class="hits">1</span>
          
          <code class="ruby">require &#39;hashie/dash&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="26">
          <span class="hits">1</span>
          
          <code class="ruby">require &#39;timeout&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="27">
          <span class="hits">1</span>
          
          <code class="ruby">require &#39;net/ssh&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="28">
          <span class="hits">1</span>
          
          <code class="ruby">require &#39;net/scp&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="29">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="30">
          <span class="hits">1</span>
          
          <code class="ruby">module Net</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="31">
          <span class="hits">1</span>
          
          <code class="ruby">  module SSH</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="32">
          
          
          <code class="ruby">    # Net::SSH::Simple is a simple wrapper around Net::SSH and Net::SCP.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="33">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="34">
          
          
          <code class="ruby">    # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="35">
          
          
          <code class="ruby">    #   # Block Syntax (synchronous)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="36">
          
          
          <code class="ruby">    #   Net::SSH::Simple.sync do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="37">
          
          
          <code class="ruby">    #     r = ssh &#39;example1.com&#39;, &#39;echo &quot;Hello World.&quot;&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="38">
          
          
          <code class="ruby">    #     puts r.stdout    #=&gt; &quot;Hello World.&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="39">
          
          
          <code class="ruby">    #     puts r.exit_code #=&gt; 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="40">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="41">
          
          
          <code class="ruby">    #     scp_put &#39;example2.com&#39;, &#39;/tmp/local_foo&#39;, &#39;/tmp/remote_bar&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="42">
          
          
          <code class="ruby">    #     scp_get &#39;example3.com&#39;, &#39;/tmp/remote_foo&#39;, &#39;/tmp/local_bar&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="43">
          
          
          <code class="ruby">    #   end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="44">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="45">
          
          
          <code class="ruby">    # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="46">
          
          
          <code class="ruby">    #   # Block Syntax (asynchronous)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="47">
          
          
          <code class="ruby">    #   t1 = Net::SSH::Simple.async do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="48">
          
          
          <code class="ruby">    #     scp_put &#39;example1.com&#39;, &#39;/tmp/local_foo&#39;, &#39;/tmp/remote_bar&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="49">
          
          
          <code class="ruby">    #     ssh    &#39;example3.com&#39;, &#39;echo &quot;Hello World A.&quot;&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="50">
          
          
          <code class="ruby">    #   end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="51">
          
          
          <code class="ruby">    #   t2 = Net::SSH::Simple.async do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="52">
          
          
          <code class="ruby">    #     scp_get &#39;example6.com&#39;, &#39;/tmp/remote_foo&#39;, &#39;/tmp/local_bar&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="53">
          
          
          <code class="ruby">    #     ssh    &#39;example7.com&#39;, &#39;echo &quot;Hello World B.&quot;&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="54">
          
          
          <code class="ruby">    #   end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="55">
          
          
          <code class="ruby">    #   r1 = t1.value # wait for t1 to finish and grab return value</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="56">
          
          
          <code class="ruby">    #   r2 = t2.value # wait for t2 to finish and grab return value</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="57">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="58">
          
          
          <code class="ruby">    #   puts r1.stdout #=&gt; &quot;Hello World A.&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="59">
          
          
          <code class="ruby">    #   puts r2.stdout #=&gt; &quot;Hello World B.&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="60">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="61">
          
          
          <code class="ruby">    # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="62">
          
          
          <code class="ruby">    #   # Using an instance</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="63">
          
          
          <code class="ruby">    #   s = Net::SSH::Simple.new</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="64">
          
          
          <code class="ruby">    #   s.ssh     &#39;example1.com&#39;, &#39;echo &quot;Hello World.&quot;&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="65">
          
          
          <code class="ruby">    #   s.scp_put &#39;example2.com&#39;, &#39;/tmp/local_foo&#39;, &#39;/tmp/remote_bar&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="66">
          
          
          <code class="ruby">    #   s.scp_get &#39;example3.com&#39;, &#39;/tmp/remote_foo&#39;, &#39;/tmp/local_bar&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="67">
          
          
          <code class="ruby">    #   s.close</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="68">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="69">
          
          
          <code class="ruby">    # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="70">
          
          
          <code class="ruby">    #   # Using no instance</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="71">
          
          
          <code class="ruby">    #   # Note: This will create a new connection for each operation!</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="72">
          
          
          <code class="ruby">    #   #       Use instance- or block-syntax for better performance.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="73">
          
          
          <code class="ruby">    #   Net::SSH::Simple.ssh     &#39;example1.com&#39;, &#39;echo &quot;Hello World.&quot;&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="74">
          
          
          <code class="ruby">    #   Net::SSH::Simple.scp_put &#39;example2.com&#39;, &#39;/tmp/local_foo&#39;, &#39;/tmp/remote_bar&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="75">
          
          
          <code class="ruby">    #   Net::SSH::Simple.scp_get &#39;example3.com&#39;, &#39;/tmp/remote_foo&#39;, &#39;/tmp/local_bar&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="76">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="77">
          
          
          <code class="ruby">    # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="78">
          
          
          <code class="ruby">    #   # Error Handling with Block Syntax (synchronous)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="79">
          
          
          <code class="ruby">    #   begin</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="80">
          
          
          <code class="ruby">    #     Net::SSH::Simple.sync do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="81">
          
          
          <code class="ruby">    #       r = ssh    &#39;example1.com&#39;, &#39;echo &quot;Hello World.&quot;&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="82">
          
          
          <code class="ruby">    #       if r.success and r.stdout == &#39;Hello World.&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="83">
          
          
          <code class="ruby">    #         puts &quot;Success! I Helloed World.&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="84">
          
          
          <code class="ruby">    #       end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="85">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="86">
          
          
          <code class="ruby">    #       r = scp_put &#39;example2.com&#39;, &#39;/tmp/local_foo&#39;, &#39;/tmp/remote_bar&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="87">
          
          
          <code class="ruby">    #       if r.success and r.sent == r.total</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="88">
          
          
          <code class="ruby">    #         puts &quot;Success! Uploaded #{r.sent} of #{r.total} bytes.&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="89">
          
          
          <code class="ruby">    #       end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="90">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="91">
          
          
          <code class="ruby">    #       r = scp_get &#39;example3.com&#39;, &#39;/tmp/remote_foo&#39;, &#39;/tmp/local_bar&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="92">
          
          
          <code class="ruby">    #       if r.success and r.sent == r.total</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="93">
          
          
          <code class="ruby">    #         puts &quot;Success! Downloaded #{r.sent} of #{r.total} bytes.&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="94">
          
          
          <code class="ruby">    #       end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="95">
          
          
          <code class="ruby">    #     end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="96">
          
          
          <code class="ruby">    #   rescue Net::SSH::Simple::Error =&gt; e</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="97">
          
          
          <code class="ruby">    #     puts &quot;Something bad happened!&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="98">
          
          
          <code class="ruby">    #     puts e          # Human readable error</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="99">
          
          
          <code class="ruby">    #     puts e.wrapped  # Original Exception</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="100">
          
          
          <code class="ruby">    #     puts e.result   # Net::SSH::Simple::Result</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="101">
          
          
          <code class="ruby">    #   end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="102">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="103">
          
          
          <code class="ruby">    # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="104">
          
          
          <code class="ruby">    #   # Error Handling with Block Syntax (asynchronous)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="105">
          
          
          <code class="ruby">    #   #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="106">
          
          
          <code class="ruby">    #   # Exceptions are raised inside your thread.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="107">
          
          
          <code class="ruby">    #   # You are free to handle them or pass them outwards.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="108">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="109">
          
          
          <code class="ruby">    #   a = Net::SSH::Simple.async do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="110">
          
          
          <code class="ruby">    #     begin</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="111">
          
          
          <code class="ruby">    #       ssh     &#39;example1.com&#39;, &#39;echo &quot;Hello World.&quot;&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="112">
          
          
          <code class="ruby">    #       scp_put &#39;example2.com&#39;, &#39;/tmp/local_foo&#39;, &#39;/tmp/remote_bar&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="113">
          
          
          <code class="ruby">    #       scp_get &#39;example3.com&#39;, &#39;/tmp/remote_foo&#39;, &#39;/tmp/local_bar&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="114">
          
          
          <code class="ruby">    #     rescue Net::SSH::Simple::Error =&gt; e</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="115">
          
          
          <code class="ruby">    #       # return our exception to the parent thread</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="116">
          
          
          <code class="ruby">    #       e</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="117">
          
          
          <code class="ruby">    #     end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="118">
          
          
          <code class="ruby">    #   end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="119">
          
          
          <code class="ruby">    #   r = a.value # Wait for thread to finish and capture result</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="120">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="121">
          
          
          <code class="ruby">    #   unless r.is_a? Net::SSH::Simple::Result</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="122">
          
          
          <code class="ruby">    #     puts &quot;Something bad happened!&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="123">
          
          
          <code class="ruby">    #     puts r</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="124">
          
          
          <code class="ruby">    #   end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="125">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="126">
          
          
          <code class="ruby">    # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="127">
          
          
          <code class="ruby">    #   # Error Handling with an instance</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="128">
          
          
          <code class="ruby">    #   s = Net::SSH::Simple.new</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="129">
          
          
          <code class="ruby">    #   begin</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="130">
          
          
          <code class="ruby">    #     r = s.ssh    &#39;example1.com&#39;, &#39;echo &quot;Hello World.&quot;&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="131">
          
          
          <code class="ruby">    #     if r.success and r.stdout == &#39;Hello World.&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="132">
          
          
          <code class="ruby">    #       puts &quot;Success! I Helloed World.&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="133">
          
          
          <code class="ruby">    #     end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="134">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="135">
          
          
          <code class="ruby">    #     r = s.scp_put &#39;example2.com&#39;, &#39;/tmp/local_foo&#39;, &#39;/tmp/remote_bar&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="136">
          
          
          <code class="ruby">    #     if r.success and r.sent == r.total</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="137">
          
          
          <code class="ruby">    #       puts &quot;Success! Uploaded #{r.sent} of #{r.total} bytes.&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="138">
          
          
          <code class="ruby">    #     end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="139">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="140">
          
          
          <code class="ruby">    #     r = s.scp_get &#39;example3.com&#39;, &#39;/tmp/remote_foo&#39;, &#39;/tmp/local_bar&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="141">
          
          
          <code class="ruby">    #     if r.success and r.sent == r.total</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="142">
          
          
          <code class="ruby">    #       puts &quot;Success! Downloaded #{r.sent} of #{r.total} bytes.&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="143">
          
          
          <code class="ruby">    #     end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="144">
          
          
          <code class="ruby">    #   rescue Net::SSH::Simple::Error =&gt; e</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="145">
          
          
          <code class="ruby">    #     puts &quot;Something bad happened!&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="146">
          
          
          <code class="ruby">    #     puts e          # Human readable error</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="147">
          
          
          <code class="ruby">    #     puts e.wrapped  # Original Exception</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="148">
          
          
          <code class="ruby">    #     puts e.result   # Net::SSH::Simple::Result (partial result)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="149">
          
          
          <code class="ruby">    #   ensure</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="150">
          
          
          <code class="ruby">    #     s.close # don&#39;t forget the clean up!</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="151">
          
          
          <code class="ruby">    #   end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="152">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="153">
          
          
          <code class="ruby">    # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="154">
          
          
          <code class="ruby">    #   # Parameters</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="155">
          
          
          <code class="ruby">    #   Net::SSH::Simple.sync do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="156">
          
          
          <code class="ruby">    #     ssh(&#39;example1.com&#39;, &#39;echo &quot;Hello World.&quot;&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="157">
          
          
          <code class="ruby">    #         {:user =&gt; &#39;tom&#39;, :password =&gt; &#39;jerry&#39;, :port =&gt; 1234})</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="158">
          
          
          <code class="ruby">    #   end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="159">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="160">
          
          
          <code class="ruby">    #   # Parameter inheritance</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="161">
          
          
          <code class="ruby">    #   Net::SSH::Simple.sync({:user =&gt; &#39;tom&#39;, :port =&gt; 1234}) do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="162">
          
          
          <code class="ruby">    #     # Both commands will inherit :user and :port</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="163">
          
          
          <code class="ruby">    #     ssh(&#39;example1.com&#39;, &#39;echo &quot;Hello World.&quot;&#39;, {:password =&gt; &#39;jerry&#39;})</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="164">
          
          
          <code class="ruby">    #     scp_put(&#39;example2.com&#39;, &#39;/tmp/a&#39;, &#39;/tmp/a&#39;, {:password =&gt; &#39;s3cr3t&#39;})</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="165">
          
          
          <code class="ruby">    #   end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="166">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="167">
          
          
          <code class="ruby">    # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="168">
          
          
          <code class="ruby">    #   # Using the SCP progress callback</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="169">
          
          
          <code class="ruby">    #   Net::SSH::Simple.sync do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="170">
          
          
          <code class="ruby">    #     scp_put &#39;example1.com&#39;, &#39;/tmp/local_foo&#39;, &#39;/tmp/remote_bar&#39; do |sent, total|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="171">
          
          
          <code class="ruby">    #       puts &quot;Bytes uploaded: #{sent} of #{total}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="172">
          
          
          <code class="ruby">    #     end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="173">
          
          
          <code class="ruby">    #   end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="174">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="175">
          
          
          <code class="ruby">    # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="176">
          
          
          <code class="ruby">    #   #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="177">
          
          
          <code class="ruby">    #   # Here be dragons: Using the event-API for a stdin-&gt;stdout pipeline</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="178">
          
          
          <code class="ruby">    #   #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="179">
          
          
          <code class="ruby">    #   r = Net::SSH::Simple.sync do</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="180">
          
          
          <code class="ruby">    #     # open a shell</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="181">
          
          
          <code class="ruby">    #     ssh(&#39;localhost&#39;, &#39;/bin/sh&#39;) do |e,c,d|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="182">
          
          
          <code class="ruby">    #       # e = :start, :stdout, :stderr, :exit_code, :exit_signal or :finish</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="183">
          
          
          <code class="ruby">    #       # c = our Net::SSH::Connection::Channel instance</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="184">
          
          
          <code class="ruby">    #       # d = data for this event</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="185">
          
          
          <code class="ruby">    #       case e</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="186">
          
          
          <code class="ruby">    #         # :start is triggered exactly once per connection</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="187">
          
          
          <code class="ruby">    #         when :start</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="188">
          
          
          <code class="ruby">    #           # we can send data using Channel#send_data</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="189">
          
          
          <code class="ruby">    #           c.send_data(&quot;echo &#39;hello stdout&#39;\n&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="190">
          
          
          <code class="ruby">    #           c.send_data(&quot;echo &#39;hello stderr&#39; 1&gt;&amp;2\n&quot;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="191">
          
          
          <code class="ruby">    #           # don&#39;t forget to eof when done feeding!</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="192">
          
          
          <code class="ruby">    #           c.eof!</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="193">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="194">
          
          
          <code class="ruby">    #         # :stdout is triggered when there&#39;s stdout data from remote.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="195">
          
          
          <code class="ruby">    #         # by default the data is also appended to result[:stdout].</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="196">
          
          
          <code class="ruby">    #         # you may return :no_append as seen below to avoid that.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="197">
          
          
          <code class="ruby">    #         when :stdout</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="198">
          
          
          <code class="ruby">    #           # read the input line-wise (it *will* arrive fragmented!)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="199">
          
          
          <code class="ruby">    #           (@buf ||= &#39;&#39;) &lt;&lt; d</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="200">
          
          
          <code class="ruby">    #           while line = @buf.slice!(/(.*)\r?\n/)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="201">
          
          
          <code class="ruby">    #             puts line #=&gt; &quot;hello stdout&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="202">
          
          
          <code class="ruby">    #           end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="203">
          
          
          <code class="ruby">    #           :no_append</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="204">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="205">
          
          
          <code class="ruby">    #         # :stderr is triggered when there&#39;s stderr data from remote.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="206">
          
          
          <code class="ruby">    #         # by default the data is also appended to result[:stderr].</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="207">
          
          
          <code class="ruby">    #         # you may return :no_append as seen below to avoid that.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="208">
          
          
          <code class="ruby">    #         when :stderr</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="209">
          
          
          <code class="ruby">    #           # read the input line-wise (it *will* arrive fragmented!)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="210">
          
          
          <code class="ruby">    #           (@buf ||= &#39;&#39;) &lt;&lt; d</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="211">
          
          
          <code class="ruby">    #           while line = @buf.slice!(/(.*)\r?\n/)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="212">
          
          
          <code class="ruby">    #             puts line #=&gt; &quot;hello stderr&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="213">
          
          
          <code class="ruby">    #           end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="214">
          
          
          <code class="ruby">    #           :no_append</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="215">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="216">
          
          
          <code class="ruby">    #         # :exit_code is triggered when the remote process exits normally.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="217">
          
          
          <code class="ruby">    #         # it does *not* trigger when the remote process exits by signal!</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="218">
          
          
          <code class="ruby">    #         when :exit_code</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="219">
          
          
          <code class="ruby">    #           puts d #=&gt; 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="220">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="221">
          
          
          <code class="ruby">    #         # :exit_signal is triggered when the remote is killed by signal.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="222">
          
          
          <code class="ruby">    #         # this would normally raise a Net::SSH::Simple::Error but</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="223">
          
          
          <code class="ruby">    #         # we suppress that here by returning :no_raise</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="224">
          
          
          <code class="ruby">    #         when :exit_signal</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="225">
          
          
          <code class="ruby">    #           puts d  # won&#39;t fire in this example, could be &quot;TERM&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="226">
          
          
          <code class="ruby">    #           :no_raise</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="227">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="228">
          
          
          <code class="ruby">    #         # :finish triggers after :exit_code when the command exits normally.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="229">
          
          
          <code class="ruby">    #         # it does *not* trigger when the remote process exits by signal!</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="230">
          
          
          <code class="ruby">    #         when :finish</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="231">
          
          
          <code class="ruby">    #           puts &quot;we are finished!&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="232">
          
          
          <code class="ruby">    #       end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="233">
          
          
          <code class="ruby">    #     end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="234">
          
          
          <code class="ruby">    #   end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="235">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="236">
          
          
          <code class="ruby">    #   # Our Result has been populated normally, except for</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="237">
          
          
          <code class="ruby">    #   # :stdout and :stdin (because we used :no_append).</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="238">
          
          
          <code class="ruby">    #   puts r           #=&gt; Net::SSH::Simple::Result</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="239">
          
          
          <code class="ruby">    #   puts r.exit_code #=&gt; 0</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="240">
          
          
          <code class="ruby">    #   puts r.stdout    #=&gt; &#39;&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="241">
          
          
          <code class="ruby">    #   puts r.stderr    #=&gt; &#39;&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="242">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="243">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="244">
          
          
          <code class="ruby">    # @author moe@busyloop.net</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="245">
          
          
          <code class="ruby">    #</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="246">
          <span class="hits">1</span>
          
          <code class="ruby">    class Simple</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="247">
          <span class="hits">1</span>
          
          <code class="ruby">      include Blockenspiel::DSL</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="248">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="249">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="250">
          
          
          <code class="ruby">      # Result of the current Net::SSH::Simple::Operation.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="251">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="252">
          
          
          <code class="ruby">      # @return [Net::SSH::Simple::Result] Result of the current operation</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="253">
          <span class="hits">1</span>
          
          <code class="ruby">      attr_reader :result</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="254">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="255">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="256">
          
          
          <code class="ruby">      # Perform ssh command on a remote host and capture the result.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="257">
          
          
          <code class="ruby">      # This will create a new connection for each invocation.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="258">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="259">
          
          
          <code class="ruby">      # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="260">
          
          
          <code class="ruby">      #   Net::SSH::Simple.ssh(&#39;localhost&#39;, &#39;echo Hello&#39;).class #=&gt; Net::SSH::Simple::Result</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="261">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="262">
          
          
          <code class="ruby">      # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="263">
          
          
          <code class="ruby">      #   Net::SSH::Simple.ssh(&#39;localhost&#39;, &#39;echo Hello&#39;).stdout #=&gt; &quot;Hello&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="264">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="265">
          
          
          <code class="ruby">      # @param (see Net::SSH::Simple#ssh)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="266">
          
          
          <code class="ruby">      # @raise [Net::SSH::Simple::Error]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="267">
          
          
          <code class="ruby">      # @return [Net::SSH::Simple::Result] Result</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="268">
          <span class="hits">1</span>
          
          <code class="ruby">      def self.ssh(*args, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="269">
          <span class="hits">15</span>
          
          <code class="ruby">        s = self.new</code>
        </li>
      
        <li class="covered" data-hits="15" data-linenumber="270">
          <span class="hits">15</span>
          
          <code class="ruby">        r = s.ssh(*args, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="271">
          <span class="hits">12</span>
          
          <code class="ruby">        s.close</code>
        </li>
      
        <li class="covered" data-hits="12" data-linenumber="272">
          <span class="hits">12</span>
          
          <code class="ruby">        r</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="273">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="274">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="275">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="276">
          
          
          <code class="ruby">      # SCP upload to a remote host.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="277">
          
          
          <code class="ruby">      # This will create a new connection for each invocation.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="278">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="279">
          
          
          <code class="ruby">      # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="280">
          
          
          <code class="ruby">      #   # SCP Upload</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="281">
          
          
          <code class="ruby">      #   Net::SSH::Simple.scp_put(&#39;localhost&#39;, &#39;/tmp/local_foo&#39;, &#39;/tmp/remote_bar&#39;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="282">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="283">
          
          
          <code class="ruby">      # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="284">
          
          
          <code class="ruby">      #   # Pass a block to monitor progress</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="285">
          
          
          <code class="ruby">      #   Net::SSH::Simple.scp_put(&#39;localhost&#39;, &#39;/tmp/local_foo&#39;, &#39;/tmp/remote_bar&#39;) do |sent, total|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="286">
          
          
          <code class="ruby">      #     puts &quot;Bytes uploaded: #{sent} of #{total}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="287">
          
          
          <code class="ruby">      #   end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="288">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="289">
          
          
          <code class="ruby">      # @param (see Net::SSH::Simple#scp_put)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="290">
          
          
          <code class="ruby">      # @raise [Net::SSH::Simple::Error]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="291">
          
          
          <code class="ruby">      # @return [Net::SSH::Simple::Result] Result</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="292">
          <span class="hits">1</span>
          
          <code class="ruby">      def self.scp_put(*args, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="293">
          <span class="hits">2</span>
          
          <code class="ruby">        s = self.new</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="294">
          <span class="hits">2</span>
          
          <code class="ruby">        r = s.scp_put(*args, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="295">
          <span class="hits">1</span>
          
          <code class="ruby">        s.close</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="296">
          <span class="hits">1</span>
          
          <code class="ruby">        r</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="297">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="298">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="299">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="300">
          
          
          <code class="ruby">      # SCP download from a remote host.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="301">
          
          
          <code class="ruby">      # This will create a new connection for each invocation.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="302">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="303">
          
          
          <code class="ruby">      # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="304">
          
          
          <code class="ruby">      #   # SCP Download</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="305">
          
          
          <code class="ruby">      #   Net::SSH::Simple.scp_get(&#39;localhost&#39;, &#39;/tmp/remote_foo&#39;, &#39;/tmp/local_bar&#39;)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="306">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="307">
          
          
          <code class="ruby">      # @example</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="308">
          
          
          <code class="ruby">      #   # Pass a block to monitor progress</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="309">
          
          
          <code class="ruby">      #   Net::SSH::Simple.scp_get(&#39;localhost&#39;, &#39;/tmp/remote_foo&#39;, &#39;/tmp/local_bar&#39;) do |sent, total|</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="310">
          
          
          <code class="ruby">      #     puts &quot;Bytes downloaded: #{sent} of #{total}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="311">
          
          
          <code class="ruby">      #   end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="312">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="313">
          
          
          <code class="ruby">      # @param (see Net::SSH::Simple#scp_get)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="314">
          
          
          <code class="ruby">      # @raise [Net::SSH::Simple::Error]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="315">
          
          
          <code class="ruby">      # @return [Net::SSH::Simple::Result] Result</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="316">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="317">
          <span class="hits">1</span>
          
          <code class="ruby">      def self.scp_get(*args, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="318">
          <span class="hits">2</span>
          
          <code class="ruby">        s = self.new</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="319">
          <span class="hits">2</span>
          
          <code class="ruby">        r = s.scp_get(*args, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="320">
          <span class="hits">1</span>
          
          <code class="ruby">        s.close</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="321">
          <span class="hits">1</span>
          
          <code class="ruby">        r</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="322">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="323">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="324">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="325">
          
          
          <code class="ruby">      # SCP upload to a remote host.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="326">
          
          
          <code class="ruby">      # The underlying Net::SSH::Simple instance will re-use</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="327">
          
          
          <code class="ruby">      # existing connections for optimal performance.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="328">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="329">
          
          
          <code class="ruby">      # @param [String] host Destination hostname or ip-address</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="330">
          
          
          <code class="ruby">      # @param [String] src Source path (on localhost)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="331">
          
          
          <code class="ruby">      # @param [String] dst Destination path (on remote host)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="332">
          
          
          <code class="ruby">      # @param opts (see Net::SSH::Simple#ssh)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="333">
          
          
          <code class="ruby">      # @param [Block] block Progress callback (optional)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="334">
          
          
          <code class="ruby">      # @return [Net::SSH::Simple::Result] Result</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="335">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="336">
          <span class="hits">1</span>
          
          <code class="ruby">      def scp_put(host, src, dst, opts={}, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="337">
          <span class="hits">16</span>
          
          <code class="ruby">        opts = @opts.merge(opts)</code>
        </li>
      
        <li class="covered" data-hits="16" data-linenumber="338">
          <span class="hits">16</span>
          
          <code class="ruby">        scp(:upload, host, src, dst, opts, &amp;block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="339">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="340">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="341">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="342">
          
          
          <code class="ruby">      # SCP download from a remote host.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="343">
          
          
          <code class="ruby">      # The underlying Net::SSH::Simple instance will re-use</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="344">
          
          
          <code class="ruby">      # existing connections for optimal performance.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="345">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="346">
          
          
          <code class="ruby">      # @param [String] host Destination hostname or ip-address</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="347">
          
          
          <code class="ruby">      # @param [String] src Source path (on remote host)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="348">
          
          
          <code class="ruby">      # @param [String] dst Destination path (on localhost)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="349">
          
          
          <code class="ruby">      # @param opts (see Net::SSH::Simple#ssh)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="350">
          
          
          <code class="ruby">      # @param [Block] block Progress callback (optional)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="351">
          
          
          <code class="ruby">      # @return [Net::SSH::Simple::Result] Result</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="352">
          
          
          <code class="ruby">      # @see Net::SSH::Simple#scp_put</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="353">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="354">
          <span class="hits">1</span>
          
          <code class="ruby">      def scp_get(host, src, dst, opts={}, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="17" data-linenumber="355">
          <span class="hits">17</span>
          
          <code class="ruby">        opts = @opts.merge(opts)</code>
        </li>
      
        <li class="covered" data-hits="17" data-linenumber="356">
          <span class="hits">17</span>
          
          <code class="ruby">        scp(:download, host, src, dst, opts, &amp;block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="357">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="358">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="359">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="360">
          
          
          <code class="ruby">      # Perform SSH operation on a remote host and capture the result.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="361">
          
          
          <code class="ruby">      # The underlying Net::SSH::Simple instance will re-use</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="362">
          
          
          <code class="ruby">      # existing connections for optimal performance.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="363">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="364">
          
          
          <code class="ruby">      # @return [Net::SSH::Simple::Result] Result</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="365">
          
          
          <code class="ruby">      # @param [String] host Destination hostname or ip-address</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="366">
          
          
          <code class="ruby">      # @param [String] cmd  Shell command to execute</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="367">
          
          
          <code class="ruby">      # @param [Block]  block Use the event-API (see example above)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="368">
          
          
          <code class="ruby">      # @param [Hash]   opts SSH options</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="369">
          
          
          <code class="ruby">      # @option opts [Array] :auth_methods</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="370">
          
          
          <code class="ruby">      #  an array of authentication methods to try</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="371">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="372">
          
          
          <code class="ruby">      # @option opts [String] :compression</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="373">
          
          
          <code class="ruby">      #  the compression algorithm to use,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="374">
          
          
          <code class="ruby">      #  or true to use whatever is supported.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="375">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="376">
          
          
          <code class="ruby">      # @option opts [Number] :compression_level</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="377">
          
          
          <code class="ruby">      #  the compression level to use when sending data</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="378">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="379">
          
          
          <code class="ruby">      # @option opts [String/boolean] :opts (true)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="380">
          
          
          <code class="ruby">      #  set to true to load the default OpenSSH opts files</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="381">
          
          
          <code class="ruby">      #  (~/.ssh/opts, /etc/ssh_opts), or to false to not load them,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="382">
          
          
          <code class="ruby">      #  or to a file-name (or array of file-names) to load those</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="383">
          
          
          <code class="ruby">      #  specific configuration files.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="384">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="385">
          
          
          <code class="ruby">      # @option opts [Array] :encryption</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="386">
          
          
          <code class="ruby">      #  the encryption cipher (or ciphers) to use</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="387">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="388">
          
          
          <code class="ruby">      # @option opts [boolean] :forward_agent</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="389">
          
          
          <code class="ruby">      #  set to true if you want the SSH agent connection to be forwarded</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="390">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="391">
          
          
          <code class="ruby">      # @option opts [String/Array] :global_known_hosts_file</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="392">
          
          
          <code class="ruby">      #  ([&#39;/etc/ssh/known_hosts&#39;,&#39;/etc/ssh/known_hosts2&#39;])</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="393">
          
          
          <code class="ruby">      #  the location of the global known hosts file.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="394">
          
          
          <code class="ruby">      #  Set to an array if you want to specify multiple</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="395">
          
          
          <code class="ruby">      #  global known hosts files.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="396">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="397">
          
          
          <code class="ruby">      # @option opts [String/Array] :hmac</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="398">
          
          
          <code class="ruby">      #  the hmac algorithm (or algorithms) to use</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="399">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="400">
          
          
          <code class="ruby">      # @option opts [String] :host_key</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="401">
          
          
          <code class="ruby">      #  the host key algorithm (or algorithms) to use</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="402">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="403">
          
          
          <code class="ruby">      # @option opts [String] :host_key_alias</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="404">
          
          
          <code class="ruby">      #  the host name to use when looking up or adding a host to a known_hosts dictionary file</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="405">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="406">
          
          
          <code class="ruby">      # @option opts [String] :host_name</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="407">
          
          
          <code class="ruby">      #  the real host name or IP to log into. This is used instead of the host parameter,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="408">
          
          
          <code class="ruby">      #  and is primarily only useful when specified in an SSH configuration file.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="409">
          
          
          <code class="ruby">      #  It lets you specify an alias, similarly to adding an entry in /etc/hosts but</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="410">
          
          
          <code class="ruby">      #  without needing to modify /etc/hosts.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="411">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="412">
          
          
          <code class="ruby">      # @option opts [String/Array] :kex</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="413">
          
          
          <code class="ruby">      #  the key exchange algorithm (or algorithms) to use</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="414">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="415">
          
          
          <code class="ruby">      # @option opts [Array] :keys</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="416">
          
          
          <code class="ruby">      #  an array of file names of private keys to use for publickey and hostbased authentication</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="417">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="418">
          
          
          <code class="ruby">      # @option opts [Array] :key_data</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="419">
          
          
          <code class="ruby">      #  an array of strings, with each element of the array being a raw private key in PEM format.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="420">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="421">
          
          
          <code class="ruby">      # @option opts [boolean] :keys_only</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="422">
          
          
          <code class="ruby">      #  set to true to use only private keys from keys and key_data parameters, even if</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="423">
          
          
          <code class="ruby">      #  ssh-agent offers more identities. This option is intended for situations where</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="424">
          
          
          <code class="ruby">      #  ssh-agent offers many different identites.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="425">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="426">
          
          
          <code class="ruby">      # @option opts [Logger] :logger</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="427">
          
          
          <code class="ruby">      #  the logger instance to use when logging</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="428">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="429">
          
          
          <code class="ruby">      # @option opts [boolean/:very] :paranoid</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="430">
          
          
          <code class="ruby">      #  either true, false, or :very, specifying how strict host-key verification should be</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="431">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="432">
          
          
          <code class="ruby">      # @option opts [String] :passphrase (nil)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="433">
          
          
          <code class="ruby">      #  the passphrase to use when loading a private key (default is nil, for no passphrase)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="434">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="435">
          
          
          <code class="ruby">      # @option opts [String] :password</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="436">
          
          
          <code class="ruby">      #  the password to use to login</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="437">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="438">
          
          
          <code class="ruby">      # @option opts [Integer] :port</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="439">
          
          
          <code class="ruby">      #  the port to use when connecting to the remote host</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="440">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="441">
          
          
          <code class="ruby">      # @option opts [Hash] :properties</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="442">
          
          
          <code class="ruby">      #  a hash of key/value pairs to add to the new connection&#39;s properties</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="443">
          
          
          <code class="ruby">      #  (see Net::SSH::Connection::Session#properties)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="444">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="445">
          
          
          <code class="ruby">      # @option opts [String] :proxy</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="446">
          
          
          <code class="ruby">      #  a proxy instance (see Proxy) to use when connecting</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="447">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="448">
          
          
          <code class="ruby">      # @option opts [Integer] :rekey_blocks_limit</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="449">
          
          
          <code class="ruby">      #  the max number of blocks to process before rekeying</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="450">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="451">
          
          
          <code class="ruby">      # @option opts [Integer] :rekey_limit</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="452">
          
          
          <code class="ruby">      #  the max number of bytes to process before rekeying</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="453">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="454">
          
          
          <code class="ruby">      # @option opts [Integer] :rekey_packet_limit</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="455">
          
          
          <code class="ruby">      #  the max number of packets to process before rekeying</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="456">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="457">
          
          
          <code class="ruby">      # @option opts [Integer] :timeout (60)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="458">
          
          
          <code class="ruby">      #   maximum idle time before a connection will time out (0 = disable).</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="459">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="460">
          
          
          <code class="ruby">      # @option opts [Integer] :operation_timeout (3600)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="461">
          
          
          <code class="ruby">      #   maximum time before aborting an operation (0 = disable).</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="462">
          
          
          <code class="ruby">      #   you may use this to guard against run-away processes.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="463">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="464">
          
          
          <code class="ruby">      # @option opts [Integer] :keepalive_interval (60)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="465">
          
          
          <code class="ruby">      #   send keep-alive probes at this interval to prevent connections</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="466">
          
          
          <code class="ruby">      #   from timing out unexpectedly.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="467">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="468">
          
          
          <code class="ruby">      # @option opts [Integer] :close_timeout (5)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="469">
          
          
          <code class="ruby">      #  grace-period on close before the connection will be terminated forcefully</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="470">
          
          
          <code class="ruby">      #  (0 = terminate immediately).</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="471">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="472">
          
          
          <code class="ruby">      # @option opts [String] :user</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="473">
          
          
          <code class="ruby">      #  the username to log in as</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="474">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="475">
          
          
          <code class="ruby">      # @option opts [String/Array] :user_known_hosts_file</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="476">
          
          
          <code class="ruby">      #  ([&#39;~/.ssh/known_hosts, ~/.ssh/known_hosts2&#39;])</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="477">
          
          
          <code class="ruby">      #  the location of the user known hosts file. Set to an array to specify multiple</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="478">
          
          
          <code class="ruby">      #  user known hosts files.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="479">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="480">
          
          
          <code class="ruby">      # @option opts [Symbol] :verbose</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="481">
          
          
          <code class="ruby">      #  how verbose to be (Logger verbosity constants, Logger::DEBUG is very verbose,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="482">
          
          
          <code class="ruby">      #  Logger::FATAL is all but silent). Logger::FATAL is the default. The symbols</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="483">
          
          
          <code class="ruby">      #  :debug, :info, :warn, :error, and :fatal are also supported and are translated</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="484">
          
          
          <code class="ruby">      #  to the corresponding Logger constant.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="485">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="486">
          
          
          <code class="ruby">      # @see http://net-ssh.github.com/ssh/v2/api/classes/Net/SSH.html#M000002</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="487">
          
          
          <code class="ruby">      #      Net::SSH documentation for the &#39;opts&#39;-hash</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="488">
          <span class="hits">1</span>
          
          <code class="ruby">      def ssh(host, cmd, opts={}, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="68" data-linenumber="489">
          <span class="hits">68</span>
          
          <code class="ruby">        opts = @opts.merge(opts)</code>
        </li>
      
        <li class="covered" data-hits="68" data-linenumber="490">
          <span class="hits">68</span>
          
          <code class="ruby">        with_session(host, opts) do |session|</code>
        </li>
      
        <li class="covered" data-hits="67" data-linenumber="491">
          <span class="hits">67</span>
          
          <code class="ruby">          @result = Result.new(</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="492">
          
          
          <code class="ruby">            { :op =&gt; :ssh, :host =&gt; host, :cmd =&gt; cmd, :start_at =&gt; Time.new,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="493">
          
          
          <code class="ruby">              :last_event_at =&gt; Time.new, :opts =&gt; opts, :stdout =&gt; &#39;&#39;, :stderr =&gt; &#39;&#39;,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="494">
          
          
          <code class="ruby">              :success =&gt; nil</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="495">
          
          
          <code class="ruby">            } )</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="496">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="67" data-linenumber="497">
          <span class="hits">67</span>
          
          <code class="ruby">          channel = session.open_channel do |chan|</code>
        </li>
      
        <li class="covered" data-hits="67" data-linenumber="498">
          <span class="hits">67</span>
          
          <code class="ruby">            chan.exec cmd do |ch, success|</code>
        </li>
      
        <li class="covered" data-hits="67" data-linenumber="499">
          <span class="hits">67</span>
          
          <code class="ruby">              @result[:success] = success</code>
        </li>
      
        <li class="covered" data-hits="67" data-linenumber="500">
          <span class="hits">67</span>
          
          <code class="ruby">              ch.on_data do |c, data|</code>
        </li>
      
        <li class="covered" data-hits="281" data-linenumber="501">
          <span class="hits">281</span>
          
          <code class="ruby">                @result[:last_event_at] = Time.new</code>
        </li>
      
        <li class="covered" data-hits="281" data-linenumber="502">
          <span class="hits">281</span>
          
          <code class="ruby">                r = block.call(:stdout, ch, data) if block</code>
        </li>
      
        <li class="covered" data-hits="281" data-linenumber="503">
          <span class="hits">281</span>
          
          <code class="ruby">                @result[:stdout] += data.to_s unless r == :no_append</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="504">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="covered" data-hits="67" data-linenumber="505">
          <span class="hits">67</span>
          
          <code class="ruby">              ch.on_extended_data do |c, type, data|</code>
        </li>
      
        <li class="covered" data-hits="236" data-linenumber="506">
          <span class="hits">236</span>
          
          <code class="ruby">                @result[:last_event_at] = Time.new</code>
        </li>
      
        <li class="covered" data-hits="236" data-linenumber="507">
          <span class="hits">236</span>
          
          <code class="ruby">                r = block.call(:stderr, ch, data) if block</code>
        </li>
      
        <li class="covered" data-hits="236" data-linenumber="508">
          <span class="hits">236</span>
          
          <code class="ruby">                @result[:stderr] += data.to_s unless r == :no_append</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="509">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="covered" data-hits="67" data-linenumber="510">
          <span class="hits">67</span>
          
          <code class="ruby">              ch.on_request(&#39;exit-status&#39;) do |c, data|</code>
        </li>
      
        <li class="covered" data-hits="62" data-linenumber="511">
          <span class="hits">62</span>
          
          <code class="ruby">                @result[:last_event_at] = Time.new</code>
        </li>
      
        <li class="covered" data-hits="62" data-linenumber="512">
          <span class="hits">62</span>
          
          <code class="ruby">                exit_code = data.read_long</code>
        </li>
      
        <li class="covered" data-hits="62" data-linenumber="513">
          <span class="hits">62</span>
          
          <code class="ruby">                block.call(:exit_code, ch, exit_code) if block</code>
        </li>
      
        <li class="covered" data-hits="62" data-linenumber="514">
          <span class="hits">62</span>
          
          <code class="ruby">                @result[:exit_code] = exit_code</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="515">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="covered" data-hits="67" data-linenumber="516">
          <span class="hits">67</span>
          
          <code class="ruby">              ch.on_request(&#39;exit-signal&#39;) do |c, data|</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="517">
          <span class="hits">3</span>
          
          <code class="ruby">                @result[:last_event_at] = Time.new</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="518">
          <span class="hits">3</span>
          
          <code class="ruby">                exit_signal = data.read_string</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="519">
          <span class="hits">3</span>
          
          <code class="ruby">                r = block.call(:exit_signal, ch, exit_signal) if block</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="520">
          <span class="hits">3</span>
          
          <code class="ruby">                @result[:exit_signal] = exit_signal</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="521">
          <span class="hits">3</span>
          
          <code class="ruby">                @result[:success] = false</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="522">
          <span class="hits">3</span>
          
          <code class="ruby">                unless r == :no_raise</code>
        </li>
      
        <li class="covered" data-hits="2" data-linenumber="523">
          <span class="hits">2</span>
          
          <code class="ruby">                  raise &quot;Killed by SIG#{@result[:exit_signal]}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="524">
          
          
          <code class="ruby">                end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="525">
          
          
          <code class="ruby">              end</code>
        </li>
      
        <li class="covered" data-hits="67" data-linenumber="526">
          <span class="hits">67</span>
          
          <code class="ruby">              block.call(:start, ch, nil) if block</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="527">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="528">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="67" data-linenumber="529">
          <span class="hits">67</span>
          
          <code class="ruby">          wait_for_channel session, channel, @result, opts</code>
        </li>
      
        <li class="covered" data-hits="63" data-linenumber="530">
          <span class="hits">63</span>
          
          <code class="ruby">          @result[:finish_at] = Time.new</code>
        </li>
      
        <li class="covered" data-hits="63" data-linenumber="531">
          <span class="hits">63</span>
          
          <code class="ruby">          block.call(:finish, channel, nil) if block</code>
        </li>
      
        <li class="covered" data-hits="63" data-linenumber="532">
          <span class="hits">63</span>
          
          <code class="ruby">          @result</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="533">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="534">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="535">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="536">
          <span class="hits">1</span>
          
          <code class="ruby">      dsl_methods false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="537">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="538">
          <span class="hits">1</span>
          
          <code class="ruby">      def initialize(opts={})</code>
        </li>
      
        <li class="covered" data-hits="69" data-linenumber="539">
          <span class="hits">69</span>
          
          <code class="ruby">        @opts     = opts</code>
        </li>
      
        <li class="covered" data-hits="69" data-linenumber="540">
          <span class="hits">69</span>
          
          <code class="ruby">        Thread.current[:ssh_simple_sessions] = {}</code>
        </li>
      
        <li class="covered" data-hits="69" data-linenumber="541">
          <span class="hits">69</span>
          
          <code class="ruby">        @result   = Result.new</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="542">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="543">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="544">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="545">
          
          
          <code class="ruby">      # Spawn a Thread to perform a sequence of ssh/scp operations.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="546">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="547">
          
          
          <code class="ruby">      # @param [Block] block</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="548">
          
          
          <code class="ruby">      # @param opts (see Net::SSH::Simple#ssh)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="549">
          
          
          <code class="ruby">      # @return [Thread] Thread executing the SSH-Block.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="550">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="551">
          <span class="hits">1</span>
          
          <code class="ruby">      def self.async(opts={}, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="552">
          <span class="hits">28</span>
          
          <code class="ruby">        Thread.new do</code>
        </li>
      
        <li class="covered" data-hits="28" data-linenumber="553">
          <span class="hits">28</span>
          
          <code class="ruby">          self.sync(opts, &amp;block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="554">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="555">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="556">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="557">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="558">
          
          
          <code class="ruby">      # Spawn a Thread to perform a sequence of ssh/scp operations.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="559">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="560">
          
          
          <code class="ruby">      # @param [Block] block</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="561">
          
          
          <code class="ruby">      # @param opts (see Net::SSH::Simple#ssh)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="562">
          
          
          <code class="ruby">      # @return [Thread] Thread executing the SSH-Block.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="563">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="564">
          <span class="hits">1</span>
          
          <code class="ruby">      def async(opts={}, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="565">
          <span class="hits">3</span>
          
          <code class="ruby">        opts = @opts.merge(opts)</code>
        </li>
      
        <li class="covered" data-hits="3" data-linenumber="566">
          <span class="hits">3</span>
          
          <code class="ruby">        self.class.async(opts, &amp;block)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="567">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="568">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="569">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="570">
          
          
          <code class="ruby">      # Perform a sequence of ssh/scp operations.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="571">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="572">
          
          
          <code class="ruby">      # @param opts (see Net::SSH::Simple#ssh)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="573">
          
          
          <code class="ruby">      # @return [Net::SSH::Simple::Result] Result</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="574">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="575">
          <span class="hits">1</span>
          
          <code class="ruby">      def self.sync(opts={}, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="40" data-linenumber="576">
          <span class="hits">40</span>
          
          <code class="ruby">        s = self.new(opts)</code>
        </li>
      
        <li class="covered" data-hits="40" data-linenumber="577">
          <span class="hits">40</span>
          
          <code class="ruby">        r = Blockenspiel.invoke(block, s)</code>
        </li>
      
        <li class="covered" data-hits="40" data-linenumber="578">
          <span class="hits">40</span>
          
          <code class="ruby">        s.close</code>
        </li>
      
        <li class="covered" data-hits="40" data-linenumber="579">
          <span class="hits">40</span>
          
          <code class="ruby">        r</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="580">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="581">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="582">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="583">
          
          
          <code class="ruby">      # Close and cleanup.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="584">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="585">
          
          
          <code class="ruby">      # @return [Net::SSH::Simple::Result] Result</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="586">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="587">
          <span class="hits">1</span>
          
          <code class="ruby">      def close</code>
        </li>
      
        <li class="covered" data-hits="62" data-linenumber="588">
          <span class="hits">62</span>
          
          <code class="ruby">        Thread.current[:ssh_simple_sessions].values.each do |session|</code>
        </li>
      
        <li class="covered" data-hits="61" data-linenumber="589">
          <span class="hits">61</span>
          
          <code class="ruby">          begin</code>
        </li>
      
        <li class="covered" data-hits="121" data-linenumber="590">
          <span class="hits">121</span>
          
          <code class="ruby">            ::Timeout.timeout(@opts[:close_timeout] || 5) { session.close }</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="591">
          
          
          <code class="ruby">          rescue =&gt; e</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="592">
          <span class="hits">1</span>
          
          <code class="ruby">            begin</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="593">
          <span class="hits">1</span>
          
          <code class="ruby">              session.shutdown!</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="594">
          
          
          <code class="ruby">            rescue</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="595">
          
          
          <code class="ruby">            end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="596">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="597">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="covered" data-hits="62" data-linenumber="598">
          <span class="hits">62</span>
          
          <code class="ruby">        @result</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="599">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="600">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="601">
          
          
          <code class="ruby">      # set lower default timeout on 32bit ruby</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="602">
          <span class="hits">1</span>
          
          <code class="ruby">      MAX_TIMEOUT = ([&#39;&#39;].pack(&#39;p&#39;).size == 8) ? 2**32 : 2**16</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="603">
          <span class="hits">1</span>
          
          <code class="ruby">      if MAX_TIMEOUT == 2**16 and $SUPPRESS_32BIT_WARNING.nil?</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="604">
          
          
          <code class="ruby">        warn &quot;WARNING: 32bit platform detected; Net::SSH::Simple timeout defaults to 65536s (~18 hours).&quot;</code>
        </li>
      
        <li class="missed" data-hits="0" data-linenumber="605">
          
          
          <code class="ruby">        warn &quot;To suppress this warning set $SUPPRESS_32BIT_WARNING=1 before you require &#39;net/ssh/simple&#39;.&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="606">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="607">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="608">
          <span class="hits">1</span>
          
          <code class="ruby">      private</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="609">
          <span class="hits">1</span>
          
          <code class="ruby">      EXTRA_OPTS = [:operation_timeout, :close_timeout, :keepalive_interval, :scp_src, :scp_dst]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="610">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="611">
          <span class="hits">1</span>
          
          <code class="ruby">      def with_session(host, opts={}, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="101" data-linenumber="612">
          <span class="hits">101</span>
          
          <code class="ruby">        opts[:timeout] ||= 60</code>
        </li>
      
        <li class="covered" data-hits="101" data-linenumber="613">
          <span class="hits">101</span>
          
          <code class="ruby">        opts[:timeout] = MAX_TIMEOUT if opts[:timeout] == 0</code>
        </li>
      
        <li class="covered" data-hits="101" data-linenumber="614">
          <span class="hits">101</span>
          
          <code class="ruby">        opts[:operation_timeout] ||= 3600</code>
        </li>
      
        <li class="covered" data-hits="101" data-linenumber="615">
          <span class="hits">101</span>
          
          <code class="ruby">        opts[:operation_timeout] = MAX_TIMEOUT if opts[:operation_timeout] == 0</code>
        </li>
      
        <li class="covered" data-hits="101" data-linenumber="616">
          <span class="hits">101</span>
          
          <code class="ruby">        opts[:close_timeout] ||= 5</code>
        </li>
      
        <li class="covered" data-hits="101" data-linenumber="617">
          <span class="hits">101</span>
          
          <code class="ruby">        opts[:keepalive_interval] ||= 60</code>
        </li>
      
        <li class="covered" data-hits="101" data-linenumber="618">
          <span class="hits">101</span>
          
          <code class="ruby">        begin</code>
        </li>
      
        <li class="covered" data-hits="584" data-linenumber="619">
          <span class="hits">584</span>
          
          <code class="ruby">          net_ssh_opts = opts.reject{|k,v| EXTRA_OPTS.include? k }</code>
        </li>
      
        <li class="covered" data-hits="101" data-linenumber="620">
          <span class="hits">101</span>
          
          <code class="ruby">          ::Timeout.timeout(opts[:operation_timeout]) do</code>
        </li>
      
        <li class="covered" data-hits="101" data-linenumber="621">
          <span class="hits">101</span>
          
          <code class="ruby">            session = Thread.current[:ssh_simple_sessions][host.hash] \</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="622">
          
          
          <code class="ruby">                    = Thread.current[:ssh_simple_sessions][host.hash] \</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="623">
          
          
          <code class="ruby">                   || Net::SSH.start(*[host, opts[:user], net_ssh_opts])</code>
        </li>
      
        <li class="covered" data-hits="100" data-linenumber="624">
          <span class="hits">100</span>
          
          <code class="ruby">            block.call(session)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="625">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="626">
          <span class="hits">7</span>
          
          <code class="ruby">        rescue =&gt; e</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="627">
          <span class="hits">7</span>
          
          <code class="ruby">          opts[:password].gsub!(/./,&#39;*&#39;) if opts.include? :password</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="628">
          <span class="hits">7</span>
          
          <code class="ruby">          @result[:exception] = e</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="629">
          <span class="hits">7</span>
          
          <code class="ruby">          @result[:success] = false</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="630">
          <span class="hits">7</span>
          
          <code class="ruby">          @result[:timed_out] = true if e.is_a? ::Timeout::Error</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="631">
          <span class="hits">7</span>
          
          <code class="ruby">          @result[:finish_at] = Time.new</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="632">
          <span class="hits">7</span>
          
          <code class="ruby">          raise Net::SSH::Simple::Error, [e, @result]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="633">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="634">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="635">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="636">
          <span class="hits">1</span>
          
          <code class="ruby">      def wait_for_channel(session, channel, result, opts)</code>
        </li>
      
        <li class="covered" data-hits="100" data-linenumber="637">
          <span class="hits">100</span>
          
          <code class="ruby">        session.loop(1) do</code>
        </li>
      
        <li class="covered" data-hits="2011" data-linenumber="638">
          <span class="hits">2011</span>
          
          <code class="ruby">          if opts[:timeout] &lt; Time.now - result[:last_event_at]</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="639">
          <span class="hits">1</span>
          
          <code class="ruby">            raise ::Timeout::Error, &#39;idle timeout&#39;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="640">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="641">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="642">
          
          
          <code class="ruby">          # Send keep-alive probes at the configured interval.</code>
        </li>
      
        <li class="covered" data-hits="2010" data-linenumber="643">
          <span class="hits">2010</span>
          
          <code class="ruby">          if opts[:keepalive_interval] &lt; Time.now.to_i - (@result[:last_keepalive_at]||0).to_i</code>
        </li>
      
        <li class="covered" data-hits="103" data-linenumber="644">
          <span class="hits">103</span>
          
          <code class="ruby">            session.send_global_request(&#39;keep-alive@openssh.com&#39;)</code>
        </li>
      
        <li class="covered" data-hits="103" data-linenumber="645">
          <span class="hits">103</span>
          
          <code class="ruby">            @result[:last_keepalive_at] = Time.now</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="646">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="2010" data-linenumber="647">
          <span class="hits">2010</span>
          
          <code class="ruby">          channel.active?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="648">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="649">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="650">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="651">
          <span class="hits">1</span>
          
          <code class="ruby">      def scp(mode, host, src, dst, opts={}, &amp;block)</code>
        </li>
      
        <li class="covered" data-hits="33" data-linenumber="652">
          <span class="hits">33</span>
          
          <code class="ruby">        opts[:scp_src] = src</code>
        </li>
      
        <li class="covered" data-hits="33" data-linenumber="653">
          <span class="hits">33</span>
          
          <code class="ruby">        opts[:scp_dst] = dst</code>
        </li>
      
        <li class="covered" data-hits="33" data-linenumber="654">
          <span class="hits">33</span>
          
          <code class="ruby">        @result = Result.new(</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="655">
          
          
          <code class="ruby">          { :op =&gt; :scp, :host =&gt; host, :opts =&gt; opts, :cmd =&gt; mode,</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="656">
          
          
          <code class="ruby">            :last_event_at =&gt; Time.new, :start_at =&gt; Time.new, :success =&gt; false</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="657">
          
          
          <code class="ruby">          } )</code>
        </li>
      
        <li class="covered" data-hits="33" data-linenumber="658">
          <span class="hits">33</span>
          
          <code class="ruby">        with_session(host, opts) do |session|</code>
        </li>
      
        <li class="covered" data-hits="33" data-linenumber="659">
          <span class="hits">33</span>
          
          <code class="ruby">          lt = 0</code>
        </li>
      
        <li class="covered" data-hits="33" data-linenumber="660">
          <span class="hits">33</span>
          
          <code class="ruby">          channel = session.scp.send(mode, src, dst) do |ch, name, sent, total|</code>
        </li>
      
        <li class="covered" data-hits="64" data-linenumber="661">
          <span class="hits">64</span>
          
          <code class="ruby">            @result[:total] ||= total</code>
        </li>
      
        <li class="covered" data-hits="64" data-linenumber="662">
          <span class="hits">64</span>
          
          <code class="ruby">            @result[:sent] = sent</code>
        </li>
      
        <li class="covered" data-hits="64" data-linenumber="663">
          <span class="hits">64</span>
          
          <code class="ruby">            @result[:last_event_at] = Time.new</code>
        </li>
      
        <li class="covered" data-hits="64" data-linenumber="664">
          <span class="hits">64</span>
          
          <code class="ruby">            block.call(sent, total) unless block.nil?</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="665">
          
          
          <code class="ruby">          end</code>
        </li>
      
        <li class="covered" data-hits="33" data-linenumber="666">
          <span class="hits">33</span>
          
          <code class="ruby">          wait_for_channel session, channel, @result, opts</code>
        </li>
      
        <li class="covered" data-hits="31" data-linenumber="667">
          <span class="hits">31</span>
          
          <code class="ruby">          @result[:finish_at] = Time.new</code>
        </li>
      
        <li class="covered" data-hits="31" data-linenumber="668">
          <span class="hits">31</span>
          
          <code class="ruby">          @result[:success] = @result[:sent] == @result[:total]</code>
        </li>
      
        <li class="covered" data-hits="31" data-linenumber="669">
          <span class="hits">31</span>
          
          <code class="ruby">          @result</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="670">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="671">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="672">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="673">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="674">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="675">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="676">
          <span class="hits">1</span>
          
          <code class="ruby">module Net</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="677">
          <span class="hits">1</span>
          
          <code class="ruby">  module SSH</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="678">
          <span class="hits">1</span>
          
          <code class="ruby">    class Simple</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="679">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="680">
          
          
          <code class="ruby">      # Error that occured during a Net::SSH::Simple operation.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="681">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="682">
          <span class="hits">1</span>
          
          <code class="ruby">      class Error &lt; RuntimeError</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="683">
          
          
          <code class="ruby">        # Reference to the underlying Exception</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="684">
          <span class="hits">1</span>
          
          <code class="ruby">        attr_reader :wrapped</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="685">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="686">
          
          
          <code class="ruby">        # {Net::SSH::Simple::Result} of the interrupted operation (may be incomplete!).</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="687">
          <span class="hits">1</span>
          
          <code class="ruby">        attr_reader :result</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="688">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="689">
          <span class="hits">1</span>
          
          <code class="ruby">        def initialize(msg, e=$!)</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="690">
          <span class="hits">7</span>
          
          <code class="ruby">          super(msg)</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="691">
          <span class="hits">7</span>
          
          <code class="ruby">          @wrapped = e</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="692">
          <span class="hits">7</span>
          
          <code class="ruby">          @result  = msg[1]</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="693">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="694">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="695">
          <span class="hits">1</span>
          
          <code class="ruby">        def to_s</code>
        </li>
      
        <li class="covered" data-hits="7" data-linenumber="696">
          <span class="hits">7</span>
          
          <code class="ruby">          &quot;#{@wrapped} @ #{@result}&quot;</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="697">
          
          
          <code class="ruby">        end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="698">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="699">
          
          
          <code class="ruby"></code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="700">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="701">
          
          
          <code class="ruby">      # Result of a Net::SSH::Simple operation.</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="702">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="703">
          
          
          <code class="ruby">      # @attr [String] host Hostname/IP address</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="704">
          
          
          <code class="ruby">      # @attr [Symbol] op :ssh or :scp</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="705">
          
          
          <code class="ruby">      # @attr [String] cmd Shell command (ssh) or :upload/:download (scp)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="706">
          
          
          <code class="ruby">      # @attr [Time] start_at Timestamp of operation start</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="707">
          
          
          <code class="ruby">      # @attr [Time] finish_at Timestamp of operation finish</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="708">
          
          
          <code class="ruby">      # @attr [Time] last_keepalive_at Timestamp of last keepalive (if any)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="709">
          
          
          <code class="ruby">      # @attr [Time] last_event_at Timestamp of last activity</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="710">
          
          
          <code class="ruby">      # @attr [Boolean] timed_out True if the operation timed out</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="711">
          
          
          <code class="ruby">      # @attr [String] stdout Output captured on stdout (SSH only)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="712">
          
          
          <code class="ruby">      # @attr [String] stderr Output captured on stderr (SSH only)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="713">
          
          
          <code class="ruby">      # @attr [boolean] success Indicates whether the transport-connection was successful</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="714">
          
          
          <code class="ruby">      # @attr [String] exit_code UNIX exit code (SSH only)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="715">
          
          
          <code class="ruby">      # @attr [Integer] total Size of requested file (in bytes, SCP only)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="716">
          
          
          <code class="ruby">      # @attr [Integer] sent Number of bytes transferred (SCP only)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="717">
          
          
          <code class="ruby">      # @attr [Hash] opts The options that the operation was parametrized with</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="718">
          
          
          <code class="ruby">      # @attr [Exception] exception Exception that occurred during this operation (if any)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="719">
          
          
          <code class="ruby">      # @attr [String] exit_signal</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="720">
          
          
          <code class="ruby">      #   Only present if the remote command terminated due to a signal (SSH only)</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="721">
          
          
          <code class="ruby">      #</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="722">
          <span class="hits">1</span>
          
          <code class="ruby">      class Result &lt; Hashie::Dash</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="723">
          <span class="hits">1</span>
          
          <code class="ruby">        property :host</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="724">
          <span class="hits">1</span>
          
          <code class="ruby">        property :op</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="725">
          <span class="hits">1</span>
          
          <code class="ruby">        property :cmd</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="726">
          <span class="hits">1</span>
          
          <code class="ruby">        property :start_at</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="727">
          <span class="hits">1</span>
          
          <code class="ruby">        property :finish_at</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="728">
          <span class="hits">1</span>
          
          <code class="ruby">        property :last_keepalive_at</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="729">
          <span class="hits">1</span>
          
          <code class="ruby">        property :last_event_at</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="730">
          <span class="hits">1</span>
          
          <code class="ruby">        property :timed_out</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="731">
          <span class="hits">1</span>
          
          <code class="ruby">        property :stdout, :default =&gt; &#39;&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="732">
          <span class="hits">1</span>
          
          <code class="ruby">        property :stderr, :default =&gt; &#39;&#39;</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="733">
          <span class="hits">1</span>
          
          <code class="ruby">        property :success, :default =&gt; false</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="734">
          <span class="hits">1</span>
          
          <code class="ruby">        property :exit_code</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="735">
          <span class="hits">1</span>
          
          <code class="ruby">        property :total</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="736">
          <span class="hits">1</span>
          
          <code class="ruby">        property :sent</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="737">
          <span class="hits">1</span>
          
          <code class="ruby">        property :opts</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="738">
          <span class="hits">1</span>
          
          <code class="ruby">        property :exception</code>
        </li>
      
        <li class="covered" data-hits="1" data-linenumber="739">
          <span class="hits">1</span>
          
          <code class="ruby">        property :exit_signal</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="740">
          
          
          <code class="ruby">      end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="741">
          
          
          <code class="ruby">    end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="742">
          
          
          <code class="ruby">  end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="743">
          
          
          <code class="ruby">end</code>
        </li>
      
        <li class="never" data-hits="" data-linenumber="744">
          
          
          <code class="ruby"></code>
        </li>
      
    </ol>
  </pre>
</div>
      
      </div>
    </div>
  </body>
</html>
